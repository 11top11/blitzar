#include "sxt/execution/schedule/test_pollable_event.h"

namespace sxt::xens {
//--------------------------------------------------------------------------------------------------
// constructor
//--------------------------------------------------------------------------------------------------
test_pollable_event::test_pollable_event(int id, int counter, std::function<void(int)> f) noexcept
    : id_{id}, counter_{counter}, f_{std::move(f)} {}

//--------------------------------------------------------------------------------------------------
// ready
//--------------------------------------------------------------------------------------------------
bool test_pollable_event::ready() noexcept { return counter_-- == 0; }

//--------------------------------------------------------------------------------------------------
// invoke
//--------------------------------------------------------------------------------------------------
void test_pollable_event::invoke() noexcept {
  if (f_) {
    f_(id_);
  }
}
} // namespace sxt::xens
